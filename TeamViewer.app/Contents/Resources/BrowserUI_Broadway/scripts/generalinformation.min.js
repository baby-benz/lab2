"use strict";function loadPage(){g_viewModel={genInfoData:ko.observable(),cpu:ko.observable(),ram:ko.observable(),drive:ko.observable(),activateManager:function(e){postRequest("GeneralInfo/ButtonClick.cmd",e),console.log(e)}},loadData(),ko.applyBindings(g_viewModel)}function loadData(){postRequest("GeneralInfo/PageLoadComplete.cmd","",initData,function(e){loadMockData()})}function loadMockData(){postRequest("../mockups/generalInformation.json","",initData,initData)}function initData(e){if((e=JSON.parse(e)).content){if(g_genInfoData){var t,n=Object.keys(e.content),o=n.length;for(t=0;o>t;t++)g_genInfoData[n[t]]=e.content[n[t]]}else g_genInfoData=e.content;g_genInfoData.CPUPercentage||g_genInfoData.RAMPercentage||g_genInfoData.DrivePercentage?(document.getElementById("performanceSection").style.display="block",updatePerfMonitors(g_genInfoData.CPUPercentage,g_genInfoData.RAMPercentage,g_genInfoData.DrivePercentage)):document.getElementById("performanceSection").style.display="none",g_genInfoData.BiosContent&&g_genInfoData.BiosDate?g_genInfoData.BiosString=g_genInfoData.BiosContent+", "+moment.utc(g_genInfoData.BiosDate,"YYYYMMDDHHmmSS.ffffff").format("L"):g_genInfoData.BiosString="",g_viewModel.genInfoData(g_genInfoData),document.getElementById("loadingScreen").style.display="none"}}function update(e){postRequest("GeneralInfo/GetPageData.cmd",e,initData)}function updatePerfMonitors(e,t,n){window.supportsVML?(e?(document.getElementById("cpuCircle").style.display="block",updateVMLMetrics("varcCPUDiv",calculateMonitorMetrics("cpu",e))):document.getElementById("cpuCircle").style.display="none",t?(document.getElementById("ramCircle").style.display="block",updateVMLMetrics("varcRAMDiv",calculateMonitorMetrics("ram",t))):document.getElementById("ramCircle").style.display="none",n?(document.getElementById("driveCircle").style.display="block",updateVMLMetrics("varcDRIVEDiv",calculateMonitorMetrics("drive",n))):document.getElementById("driveCircle").style.display="none"):(e?(document.getElementById("cpuCircle").style.display="block",g_viewModel.cpu(calculateMonitorMetrics("cpu",e))):document.getElementById("cpuCircle").style.display="none",t?(document.getElementById("ramCircle").style.display="block",g_viewModel.ram(calculateMonitorMetrics("ram",t))):document.getElementById("ramCircle").style.display="none",n?(document.getElementById("driveCircle").style.display="block",g_viewModel.drive(calculateMonitorMetrics("drive",n))):document.getElementById("driveCircle").style.display="none")}function updateVMLMetrics(e,t){document.getElementById(e).innerHTML='<?import namespace = v urn = "urn:schemas-microsoft-com:vml" implementation = "#default#VML" declareNamespace /><v:arc style="POSITION: absolute; WIDTH: 116px; HEIGHT: 116px; TOP: 10px; LEFT: 10px" startangle = "0" endangle = "'+t.usageEndAngle+'" coordsize = "21600,21600" fillcolor = "#FFFFFF" strokecolor = "'+t.strokeColor+'" strokeweight = "6pt" adj = ",,5400"></v:arc>'}function calculateMonitorMetrics(e,t){var n={},o=Math.round(3.6*t),a=ColoringFor(e);return o=Math.min(o,360),o=Math.max(o,-360),n.usageEndAngle=o,n.availableEndAngle=360,n.availableStartAngle=180>o?0:o,n.svgPath=calculatePathSVG(58,o,8,[68,5]),n.strokeColor=a(t),n}function calculatePathSVG(e,t,n,o){t>360&&(t=360);var a=function(){return e*Math.sin(t*Math.PI/180)},r=function(){return t>180?-1*(e*Math.cos(t*Math.PI/180)+e):e-e*Math.cos(t*Math.PI/180)};void 0===o&&(o=[e+1+n/2,n/2]);var i=["M "+o[0]+","+o[1]];return 180>t&&i.push("a"+e+","+e+" 0 0 1 "+a()+","+r()),180>t||i.push("a"+e+","+e+" 0 1 1 0,"+2*e),t>180&&i.push("a"+e+","+e+" 0 0 1 "+(a()-1)+","+r()),i.join(" ")}function ColoringForRAM(){this.threshholdOne=74,this.threshholdTwo=89}function ColoringForCPU(){this.threshholdOne=59,this.threshholdTwo=79}function ColoringForDRIVE(){this.threshholdOne=74,this.threshholdTwo=89}function ColoringFor(e){var t;return"ram"===e?t=new ColoringForRAM:"cpu"===e?t=new ColoringForCPU:"drive"===e&&(t=new ColoringForDRIVE),function(e){return e>t.threshholdTwo?"#D0021B":e>t.threshholdOne?"#FFd200":"#7DC855"}}function postRequest(e,t,n,o){var a="string"==typeof t?t:Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&"),r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return r.open("POST",e),r.onreadystatechange=function(){r.readyState>3&&(200==r.status?n&&n(r.responseText):o&&o(r.responseText))},r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(a),r}var g_viewModel,g_genInfoData;moment.locale(window.navigator.language||"en");