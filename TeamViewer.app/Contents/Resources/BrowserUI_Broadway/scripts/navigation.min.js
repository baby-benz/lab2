"use strict";function loadNavigation(){postRequest("Navigation/PageLoadComplete.cmd","",initNavigation,function(t){loadMockData()})}function loadMockData(){postRequest("mockups/navigation.json","",initNavigation,initNavigation)}function initNavigation(t){var e,n,a,o=document.getElementById("mainNavigation"),i="";for(a=0,e=(t=JSON.parse(t)).content.pages.length;e>a;a++)i+='<li style="white-space: nowrap;" class="'+((n=t.content.pages[a]).active?"active":"")+'"><a href="'+n.href+'">'+n.displayName+"</a></li>";o.innerHTML=i,document.getElementById("dummyNavigation").innerHTML=i,document.addEventListener?o.addEventListener("click",function(t){var e=t.target||t.srcElement;o.querySelector(".active").className="",e.parentNode.className="active",postRequest("Navigation/ShowPage.cmd",e.getAttribute("href")),t.preventDefault(),t.stopPropagation()}):document.attachEvent&&o.attachEvent("onclick",function(t){var e=t.target||t.srcElement;o.querySelector(".active").className="",e.parentNode.className="active",postRequest("Navigation/ShowPage.cmd",e.getAttribute("href")),t.returnValue=!1,t.cancelBubble=!0}),setTimeout(setPanelWidth,150)}function setPanelWidth(){postRequest("Navigation/SetPanelWidth.cmd",""+calculateMaxPanelWidth(),function(){})}function calculateMaxPanelWidth(){var t,e,n,a=document.getElementById("dummyNavigation"),o=0;for(n=0,e=(t=a.querySelectorAll("a")).length;e>n;n++)t[n].offsetWidth>o&&(o=t[n].offsetWidth);return a.parentNode.removeChild(a),150>o?214:o+50}function selectNavigationButton(t){var e=document.getElementById("mainNavigation"),t=JSON.parse(t);e.querySelector(".active").className="",e.querySelector('a[href="'+t.content+'"]').parentNode.className="active"}function update(t){"Buttons"==t?postRequest("Navigation/GetButtons.cmd","",initNavigation):"SelectedButton"==t&&postRequest("Navigation/GetSelectedButton.cmd","",selectNavigationButton,function(t){postRequest("mockups/selectNavigationButton.json","",selectNavigationButton)})}function postRequest(t,e,n,a){var o="string"==typeof e?e:Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&"),i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return i.open("POST",t),i.onreadystatechange=function(){i.readyState>3&&(200==i.status?n&&n(i.responseText):a&&a(i.responseText))},i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(o),i}